function loadAnalytics(){if(document.getElementById("ga-script"))return;const e=document.createElement("script");function t(){dataLayer.push(arguments)}e.id="ga-script",e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-WW7LC8SFJ5",document.head.appendChild(e),window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","G-WW7LC8SFJ5",{page_path:location.pathname})}function initCookieModal(){const e=localStorage.getItem("cookieConsent"),t=document.getElementById("cookieModal");e?"accepted"===e&&loadAnalytics():t.classList.remove("hidden"),document.getElementById("acceptCookies").addEventListener("click",(()=>{localStorage.setItem("cookieConsent","accepted"),loadAnalytics(),t.classList.add("hidden")})),document.getElementById("denyCookies").addEventListener("click",(()=>{localStorage.setItem("cookieConsent","denied"),t.classList.add("hidden")})),document.getElementById("cookieCloseBtn").addEventListener("click",(()=>{localStorage.setItem("cookieConsent","denied"),t.classList.add("hidden")}))}function setupLegalModals(){document.querySelectorAll("[data-modal]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-modal");document.getElementById(t).classList.remove("hidden")}))})),document.querySelectorAll("[data-close]").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".modal").classList.add("hidden")}))}))}window.addEventListener("load",(()=>{initCookieModal(),setupLegalModals();const e=document.getElementById("splash"),t=document.getElementById("splashVideo"),n=document.getElementById("mainContent");e&&t&&n&&(t.autoplay=!0,t.muted=!0,t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("preload","auto"),t.addEventListener("canplaythrough",(()=>{t.play().catch((()=>{}))})),t.addEventListener("ended",(()=>{e.addEventListener("transitionend",(()=>{e.remove(),n.classList.add("visible")}),{once:!0}),e.classList.add("hidden")})),t.addEventListener("loadedmetadata",(()=>{setTimeout((()=>{e.classList.contains("hidden")||(t.pause(),t.dispatchEvent(new Event("ended")))}),5e3)})))}));const dataKey="fs_positions",defaultPositions={},darkKey="fs_dark",keyStep=10;let state={el:null,sx:0,sy:0,ox:0,oy:0,lt:null};const DEBUG=!1;function getRect(){return document.querySelector(".gallery-container").getBoundingClientRect()}function save(){const e={};document.querySelectorAll(".draggable").forEach((t=>{e[t.id]={x:t.offsetLeft,y:t.offsetTop}})),localStorage.setItem(dataKey,JSON.stringify(e))}function load(){const e=JSON.parse(localStorage.getItem(dataKey)||"{}"),t=getRect();document.querySelectorAll(".draggable").forEach((n=>{let o,a;if(null!=e[n.id])o=e[n.id].x,a=e[n.id].y;else{const e=defaultPositions[n.id]||{x:0,y:0};o=e.x,a=e.y}const d=t.width-n.offsetWidth,s=t.height-n.offsetHeight;o=Math.min(Math.max(0,o),d),a=Math.min(Math.max(0,a),s),n.style.left=o+"px",n.style.top=a+"px"}))}function setupLoad(e){e.complete||(e.classList.add("image-loading"),e.onload=()=>e.classList.remove("image-loading"),e.onerror=()=>{e.classList.remove("image-loading"),e.classList.add("image-error")})}function toggleDark(){const e=document.body.classList.toggle("dark");localStorage.setItem(darkKey,e)}function showPop(e){console.log("游댒 showPop invocado para",e.id);const t=document.getElementById("popup"),n=document.getElementById("popupImage"),o=document.getElementById("popupTitle"),a=document.getElementById("popupDescription"),d=document.getElementById("detalleLista"),s=e.dataset.popupSrc||e.src;n.src=s,o.textContent=e.alt,a.textContent=e.dataset.description,d.innerHTML="";[`T칠cnica: ${e.dataset.detailTecnica||"No disponible"}`,`Medidas: ${e.dataset.detailMedidas||"No disponible"}`,`A침o de ejecuci칩n: ${e.dataset.detailAno||"No disponible"}`,`Proceso creativo: ${e.dataset.detailProceso||"No disponible"}`,`Inspiraci칩n: ${e.dataset.detailInspiracion||"No disponible"}`].forEach((e=>{const t=document.createElement("li");t.textContent=e,d.appendChild(t)})),t.classList.add("active")}function closePop(){document.fullscreenElement&&document.exitFullscreen(),document.getElementById("popup").classList.remove("active")}document.addEventListener("DOMContentLoaded",(()=>{localStorage.removeItem(dataKey);const e={about:{es:"Info",en:"About"},contact:{es:"Contacto",en:"Contact"},aboutTitle:{es:"Sobre Family Style",en:"About Family Style"},contactTitle:{es:"Env칤anos un email",en:"Send us an email"},close:{es:"Cerrar",en:"Close"},aboutInfo:{es:"Family Style es un estudio de dise침o y desarrollo web.",en:"Family Style is a web design and development studio."},pubBtn:{es:"Publicaciones",en:"Publications"},Shangay:{es:"Entrevista Shangay",en:"Shangay Interview"},Telemadrid:{es:"Entrevista Telemadrid",en:"Telemadrid Interview"},Elbloque:{es:"Exposici칩n El Bloque",en:"El Bloque Exhibition"},filterAll:{es:"Antonio Monereo",en:"Antonio Monereo"},filterCopies:{es:"Copias",en:"Copies"},filterPaintings:{es:"Pinturas",en:"Paintings"},filterDrawings:{es:"Dibujos",en:"Drawings"},Sillamoderna:{es:"Silla moderna",en:"Modern Chair"}};function t(t){document.querySelectorAll("[data-i18n]").forEach((n=>{const o=n.getAttribute("data-i18n");e[o]&&(n.textContent=e[o][t])})),localStorage.setItem("lang",t)}let n=localStorage.getItem("lang")||"es";t(n),document.getElementById("langToggle").addEventListener("click",(()=>{n="es"===n?"en":"es",t(n)}));const o=document.getElementById("pubBtn"),a=(document.getElementById("pubMenu"),document.getElementById("bottomSheet"));o.addEventListener("click",(e=>{e.stopPropagation(),o.parentElement.classList.toggle("open")})),document.addEventListener("click",(()=>{o.parentElement.classList.remove("open")}));const d=Array.from(document.querySelectorAll(".image-gallery .draggable"));function s(e){d.forEach((t=>{t.style.display="all"===e||t.dataset.category===e?"":"none"})),document.querySelectorAll(".filter-btn").forEach((t=>{t.classList.toggle("active",t.dataset.cat===e)}))}document.getElementById("homeBtn").addEventListener("click",(e=>{e.preventDefault(),s("all"),document.body.classList.remove("menu-open"),void 0!==a&&a.classList.remove("open")})),document.querySelectorAll(".filter-btn").forEach((e=>{e.addEventListener("click",(()=>{s(e.dataset.cat),a.classList.remove("open")}))})),s("all"),document.querySelectorAll(".sheet-nav").forEach((e=>{e.addEventListener("click",(()=>{switch(e.dataset.action){case"about":document.getElementById("aboutBtn").click();break;case"contact":document.getElementById("contactBtn").click();break;case"dark":document.getElementById("darkModeToggle").click();break;case"reset":document.getElementById("resetBtn").click()}a.classList.remove("open")}))}));const c=document.getElementById("resetBtn"),l=document.getElementById("darkModeToggle"),i=document.getElementById("aboutBtn"),r=document.getElementById("aboutSection"),m=document.getElementById("closeAbout"),u=document.getElementById("popup"),g=document.getElementById("closePopup"),p=document.getElementById("hamburgerBtn"),y=document.getElementById("mobileNav");p.addEventListener("click",(()=>{const e="true"===p.getAttribute("aria-expanded");p.setAttribute("aria-expanded",String(!e)),y.hidden=e,document.body.classList.toggle("menu-open",!e),e||y.querySelector('[role="menuitem"]')?.focus(),p.setAttribute("aria-label",e?"Abrir men칰":"Cerrar men칰"),p.focus()}));y.querySelectorAll('[role="menuitem"]').forEach((e=>{e.addEventListener("click",(()=>{y.hidden=!0,p.setAttribute("aria-expanded","false"),p.setAttribute("aria-label","Abrir men칰"),document.body.classList.remove("menu-open"),document.getElementById("gallery")?.focus()}))})),document.querySelectorAll(".mobile-nav-btn[data-filter]").forEach((e=>{e.addEventListener("click",(()=>{s(e.getAttribute("data-filter")),document.body.classList.remove("menu-open")}))})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&"true"===p.getAttribute("aria-expanded")&&p.click()})),document.getElementById("aboutNav").addEventListener("click",(()=>{document.getElementById("aboutBtn").click(),document.body.classList.remove("menu-open")})),document.getElementById("contactNav").addEventListener("click",(()=>{document.getElementById("contactBtn").click(),document.body.classList.remove("menu-open")}));const E=document.getElementById("pubNav"),h=E.parentElement;E.addEventListener("click",(e=>{e.stopPropagation();const t="true"===E.getAttribute("aria-expanded");E.setAttribute("aria-expanded",String(!t)),h.classList.toggle("open")})),document.addEventListener("click",(()=>{h.classList.contains("open")&&(E.setAttribute("aria-expanded","false"),h.classList.remove("open"))}));document.getElementById("homeBtn").addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}));const f=[document.getElementById("searchBtnMobile"),document.getElementById("searchBtnDesktop")].filter(Boolean),L=document.getElementById("searchContainer"),v=document.getElementById("searchForm"),b=document.getElementById("searchInput"),k=Array.from(document.querySelectorAll(".draggable"));f.forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),L.classList.toggle("hidden"),L.classList.contains("hidden")||b.focus()}))})),document.addEventListener("click",(e=>{const t=f.some((t=>t===e.target));L.contains(e.target)||t||L.classList.add("hidden")})),v.addEventListener("submit",(e=>{e.preventDefault();const t=b.value.trim().toLowerCase();k.forEach((e=>{const n=(e.id+" "+e.alt+" "+(e.dataset.description||"")).toLowerCase();e.style.display=n.includes(t)?"":"none"}))})),c.onclick=()=>{localStorage.removeItem(dataKey),document.querySelectorAll(".draggable").forEach((e=>{e.style.left="",e.style.top=""})),load()},"true"===localStorage.getItem(darkKey)&&document.body.classList.add("dark"),l.onclick=toggleDark,i.addEventListener("click",(e=>{e.preventDefault(),r.classList.remove("hidden"),i.setAttribute("aria-expanded","true"),r.setAttribute("aria-hidden","false"),m.focus()})),m.onclick=()=>r.classList.add("hidden");const I=document.getElementById("contactSection"),B=document.getElementById("closeContact"),A=document.getElementById("contactBtn");A.addEventListener("click",(()=>{I.classList.remove("hidden"),A.setAttribute("aria-expanded","true"),w.focus()})),B.addEventListener("click",(()=>{I.classList.add("hidden"),A.setAttribute("aria-expanded","false"),A.focus()}));const w=document.getElementById("sendMailBtn");w.addEventListener("click",(()=>{window.location.href="mailto:antoniomonelopez@gmail.com"})),document.addEventListener("keydown",(e=>{"Escape"!==e.key||I.classList.contains("hidden")||B.click()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(r.classList.contains("hidden")||r.classList.add("hidden"),u.classList.contains("active")&&closePop())}));const S=Array.from(document.querySelectorAll(".draggable"));S.forEach((e=>{e.style.position="absolute"})),S.forEach((e=>{const t=getRect(),n=e.getBoundingClientRect();defaultPositions[e.id]={x:n.left-t.left,y:n.top-t.top}})),load();let x=getRect();S.forEach((e=>{setupLoad(e),e.tabIndex=0})),window.addEventListener("resize",(()=>{x=getRect(),load()})),S.forEach((e=>{e.onpointerdown=t=>{"touch"!==t.pointerType&&t.preventDefault(),state.el=e,state.sx=t.clientX,state.sy=t.clientY,state.ox=e.offsetLeft,state.oy=e.offsetTop,e.setPointerCapture(t.pointerId)},e.onpointermove=t=>{if(!state.el)return;let n=state.ox+(t.clientX-state.sx),o=state.oy+(t.clientY-state.sy);console.log(`Moviendo: ${e.id}, X: ${n}, Y: ${o}, R.width: ${x.width}, R.height: ${x.height}`),n=Math.min(Math.max(0,n),x.width-e.offsetWidth),o=Math.min(Math.max(0,o),x.height-e.offsetHeight),e.style.left=`${n}px`,e.style.top=`${o}px`},e.onpointerup=e=>{state.el&&(state.el.style.transform="",save(),state.el.releasePointerCapture(e.pointerId),state.el=null)},e.ondblclick=()=>showPop(e),"ontouchstart"in window&&e.addEventListener("click",(t=>{t.stopPropagation(),showPop(e)})),e.onkeydown=t=>{let n=!1,o=e.offsetLeft,a=e.offsetTop;switch(t.key){case"ArrowLeft":o=Math.max(0,o-10),n=!0;break;case"ArrowRight":o=Math.min(x.width-e.offsetWidth,o+10),n=!0;break;case"ArrowUp":a=Math.max(0,a-10),n=!0;break;case"ArrowDown":a=Math.min(x.height-e.offsetHeight,a+10),n=!0;break;case"Enter":case" ":showPop(e)}n&&(t.preventDefault(),e.style.left=`${o}px`,e.style.top=`${a}px`,save())}})),g.onclick=closePop,u.onclick=e=>{e.target===u&&closePop()},document.getElementById("currentYear").textContent=(new Date).getFullYear();const C=document.getElementById("popupImage");C.addEventListener("dblclick",(()=>{document.fullscreenElement?document.exitFullscreen():C.requestFullscreen().catch((e=>{console.error(`Error al pedir fullscreen: ${e.message}`)}))}));let M=0;C.addEventListener("touchend",(e=>{const t=(new Date).getTime(),n=t-M;n<300&&n>0&&(document.fullscreenElement?document.exitFullscreen():C.requestFullscreen().catch((e=>{console.error(`Error al pedir fullscreen: ${e.message}`)}))),M=t}))}));